<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Evaluate the LCZ - interpolated map — lcz_interp_eval • LCZ4r</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.9/font.css" rel="stylesheet"><link href="../deps/Montserrat-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Evaluate the LCZ - interpolated map — lcz_interp_eval"><meta name="description" content="This function evaluate the variability of a spatial and temporal LCZ-Kring related - interpolation. More details: https://bymaxanjos.github.io/LCZ4r/articles/Introd_local_LCZ4r.html"><meta property="og:description" content="This function evaluate the variability of a spatial and temporal LCZ-Kring related - interpolation. More details: https://bymaxanjos.github.io/LCZ4r/articles/Introd_local_LCZ4r.html"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">LCZ4r</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Home"><span class="fa fa-home"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/tutorials.html">Tutorials</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/examples.html">LCZ4r-QGIS Plugin</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ByMaxAnjos/LCZ4r/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Evaluate the LCZ - interpolated map</h1>
      <small class="dont-index">Source: <a href="https://github.com/ByMaxAnjos/LCZ4r/blob/main/R/lcz_interp_eval.R" class="external-link"><code>R/lcz_interp_eval.R</code></a></small>
      <div class="d-none name"><code>lcz_interp_eval.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function evaluate the variability of a spatial and temporal LCZ-Kring related - interpolation. More details: <a href="https://bymaxanjos.github.io/LCZ4r/articles/Introd_local_LCZ4r.html">https://bymaxanjos.github.io/LCZ4r/articles/Introd_local_LCZ4r.html</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">lcz_interp_eval</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  data_frame <span class="op">=</span> <span class="st">""</span>,</span>
<span>  var <span class="op">=</span> <span class="st">""</span>,</span>
<span>  station_id <span class="op">=</span> <span class="st">""</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  extract.method <span class="op">=</span> <span class="st">"simple"</span>,</span>
<span>  LOOCV <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split.ratio <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  sp.res <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  tp.res <span class="op">=</span> <span class="st">"hour"</span>,</span>
<span>  vg.model <span class="op">=</span> <span class="st">"Sph"</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  impute <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  isave <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  LCZinterp <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>SpatRaster</code> object containing the LCZ map. The LCZ map can be obtained using the <code><a href="lcz_get_map.html">lcz_get_map()</a></code> function.</p></dd>


<dt id="arg-data-frame">data_frame<a class="anchor" aria-label="anchor" href="#arg-data-frame"></a></dt>
<dd><p>A data frame containing air temperature measurements and station IDs. The data frame should have a date field in hourly or higher resolution format.</p></dd>


<dt id="arg-var">var<a class="anchor" aria-label="anchor" href="#arg-var"></a></dt>
<dd><p>Name of the variable for interpolation, e.g. air temperature, in the dataframe.</p></dd>


<dt id="arg-station-id">station_id<a class="anchor" aria-label="anchor" href="#arg-station-id"></a></dt>
<dd><p>Name of the station ID variable in the dataframe.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments for the <code>selectByDate</code> function from the <code>openair</code> package. These arguments allow for flexible selection of specific time periods (year, month, day, hour). Examples of how to use these arguments include:</p><ul><li><p><strong>Year(s)</strong>: Numeric value(s) specifying the year(s) to select. For example, <code>year = 1998:2004</code> selects all years between 1998 and 2004 (inclusive), while <code>year = c(1998, 2004)</code> selects only the years 1998 and 2004.</p></li>
<li><p><strong>Month(s)</strong>: Numeric or character value(s) specifying the months to select. Numeric examples: <code>month = 1:6</code> (January to June), or character examples: <code>month = c("January", "December")</code>.</p></li>
<li><p><strong>Day(s)</strong>: Numeric value(s) specifying the days to select. For instance, <code>day = 1:30</code> selects days from 1 to 30, or <code>day = 15</code> selects only the 15th day of the month.</p></li>
<li><p><strong>Hour(s)</strong>: Numeric value(s) specifying the hours to select. For example, <code>hour = 0:23</code> selects all hours in a day, while <code>hour = 9</code> selects only the 9th hour.</p></li>
<li><p><strong>Start date</strong>: A string specifying the start date in either start="DD/MM/YYYY" (e.g., "1/2/1999") or "YYYY-mm-dd" format (e.g., "1999-02-01").</p></li>
<li><p><strong>End date</strong>: A string specifying the end date in either end="DD/MM/YYYY" (e.g., "1/2/1999") or "YYYY-mm-dd" format (e.g., "1999-02-01").</p></li>
</ul></dd>


<dt id="arg-extract-method">extract.method<a class="anchor" aria-label="anchor" href="#arg-extract-method"></a></dt>
<dd><p>A character string specifying the method used to assign the LCZ class to each station point. The default is "simple". The available methods are:</p><ul><li><p><strong>simple</strong>: Assigns the LCZ class based on the value of the raster cell in which the point falls.</p></li>
<li><p><strong>bilinear</strong>: Interpolates the LCZ class values from the four nearest raster cells surrounding the point.</p></li>
<li><p><strong>two.step</strong>: Assigns LCZs to stations while filtering out those located in heterogeneous LCZ areas. This method requires that at least 80% of the pixels within a 5 × 5 kernel match the LCZ of the center pixel (Daniel et al., 2017). Note that this method reduces the number of stations.</p></li>
</ul></dd>


<dt id="arg-loocv">LOOCV<a class="anchor" aria-label="anchor" href="#arg-loocv"></a></dt>
<dd><p>IF set to TRUE (default), cross validation functions for kriging is used. Leave-one-out cross validation (LOOCV) visits a data point, and predicts the value at that location by leaving out the observed value, and proceeds with the next data point. 5 n-fold cross validation is used (http://www.gstat.org/).  If set FALSE, the split method into training and testing stations is used.</p></dd>


<dt id="arg-split-ratio">split.ratio<a class="anchor" aria-label="anchor" href="#arg-split-ratio"></a></dt>
<dd><p>A numeric value representing the proportion of meteorological stations to be used for training (interpolation). The remaining stations will be used for testing (evaluation). For example, the default "0.8" indicates that 80% of the stations will be used for traninig and 20% for testing.</p></dd>


<dt id="arg-sp-res">sp.res<a class="anchor" aria-label="anchor" href="#arg-sp-res"></a></dt>
<dd><p>Spatial resolution in unit of meters for interpolation. Default is 100.</p></dd>


<dt id="arg-tp-res">tp.res<a class="anchor" aria-label="anchor" href="#arg-tp-res"></a></dt>
<dd><p>Temporal resolution, the time period to average to. Default is “hour”, but includes “day”, “week”, “quater”, “month”, “year”, “season”, “seasonyear”,  “monthyear”, “weekday”, or “weekend”. It also include “2 day”, “2 week”, “3 month” and so on.</p></dd>


<dt id="arg-vg-model">vg.model<a class="anchor" aria-label="anchor" href="#arg-vg-model"></a></dt>
<dd><p>If kriging is selected, the list of viogrammodels that will be tested and interpolated with kriging. Default is "Sph". The model are "Sph", "Exp", "Gau", "Ste". They names respective shperical, exponential,gaussian,Matern familiy, Matern, M. Stein's parameterization.</p></dd>


<dt id="arg-by">by<a class="anchor" aria-label="anchor" href="#arg-by"></a></dt>
<dd><p>data frame time-serie split: “year”, “season”, “seasonyear”,  “month”, “monthyear”, “weekday”, “weekend”,  “site”,
“daylight”(daytime and nighttime).See argument <em>type</em> in openair package:<a href="https://bookdown.org/david_carslaw/openair/sections/intro/openair-package.html#the-type-option" class="external-link">https://bookdown.org/david_carslaw/openair/sections/intro/openair-package.html#the-type-option</a></p></dd>


<dt id="arg-impute">impute<a class="anchor" aria-label="anchor" href="#arg-impute"></a></dt>
<dd><p>Method to impute missing values (“mean”, “median”, “knn”, “bag”).</p></dd>


<dt id="arg-isave">isave<a class="anchor" aria-label="anchor" href="#arg-isave"></a></dt>
<dd><p>Save the plot into your directory.</p></dd>


<dt id="arg-lczinterp">LCZinterp<a class="anchor" aria-label="anchor" href="#arg-lczinterp"></a></dt>
<dd><p>If set to TRUE (default), the LCZ interpolation approach is used. If set to FALSE, conventional interpolation without LCZ is used.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A summary table in CSV format containing evaluation metrics, including observed values, predicted values, and residuals.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>See the documentation for <code><a href="lcz_get_map.html">lcz_get_map()</a></code> to obtain an LCZ map.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Evaluate air temperature values</span></span></span>
<span class="r-in"><span> <span class="va">my_interp</span> <span class="op">&lt;-</span> <span class="fu">lcz_interp_eval</span><span class="op">(</span><span class="va">lcz_map</span>, data_frame <span class="op">=</span> <span class="va">lcz_data</span>, var <span class="op">=</span> <span class="st">"airT"</span>,</span></span>
<span class="r-in"><span>                               station_id <span class="op">=</span> <span class="st">"station"</span>, tp.res <span class="op">=</span> <span class="st">"day"</span>, sp.res<span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>                               year <span class="op">=</span> <span class="fl">2019</span>, month<span class="op">=</span><span class="fl">9</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Max Anjos.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

