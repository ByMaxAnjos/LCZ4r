<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="LCZ4r">
<title>LCZ4r Local Functions • LCZ4r</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="LCZ4r Local Functions">
<meta property="og:description" content="LCZ4r">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">LCZ4r</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Introd_general_LCZ4r.html">LCZ4r General Functions</a>
    <a class="dropdown-item" href="../articles/Introd_local_LCZ4r.html">LCZ4r Local Functions</a>
    <a class="dropdown-item" href="../articles/instalation_lcz4r.html">Install LCZ4r</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ByMaxAnjos/LCZ4r/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>LCZ4r Local Functions</h1>
                        <h4 data-toc-skip class="author">Max Anjos</h4>
            
            <h4 data-toc-skip class="date">March 07, 2024</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ByMaxAnjos/LCZ4r/blob/HEAD/vignettes/Introd_local_LCZ4r.Rmd" class="external-link"><code>vignettes/Introd_local_LCZ4r.Rmd</code></a></small>
      <div class="d-none name"><code>Introd_local_LCZ4r.Rmd</code></div>
    </div>

    
    
<p>The <strong>Local functions of LCZ4r</strong> are tailored to handle
larger-scale data inputs, such as datasets containing air temperature
readings. In this tutorial, we focus on the city of Berlin as our
reference location. Specifically, we utilize data collected from 23
meteorological stations situated across the city, which provide hourly
time series of air temperature readings. These datasets are sourced from
the Urban Climate Observatory (UCO).</p>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>The <strong>Local functions of <code>LCZ4r</code></strong>, each
serving a unique purpose:</p>
<table class="table">
<colgroup>
<col width="21%">
<col width="36%">
<col width="21%">
<col width="21%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Description</th>
<th>Data Required</th>
<th>Internet Access Required</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="../reference/lcz_ts.html">lcz_ts()</a></code></td>
<td>Analyze LCZ Time Series</td>
<td>Yes</td>
<td>Optional*</td>
</tr>
<tr class="even">
<td><code>lcz_anamoly()</code></td>
<td>Calculate LCZ Thermal Anomalies</td>
<td>Yes</td>
<td>Optional</td>
</tr>
<tr class="odd">
<td><code>lcz_anamoly_map()</code></td>
<td>Map LCZ Thermal Anomalies</td>
<td>Yes</td>
<td>Optional</td>
</tr>
<tr class="even">
<td><code><a href="../reference/lcz_interp_map.html">lcz_interp_map()</a></code></td>
<td>Perform LCZ Interpolation</td>
<td>Yes</td>
<td>Optional</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/lcz_plot_interp.html">lcz_plot_interp()</a></code></td>
<td>Visualize LCZ Interpolation</td>
<td>Yes</td>
<td>Optional</td>
</tr>
<tr class="even">
<td><code>lcz_uhi_intensity()</code></td>
<td>Assess LCZ for Urban Heat Island Intensity</td>
<td>Yes</td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p>*Optional if you use the <code><a href="../reference/lcz_get_map2.html">lcz_get_map2()</a></code> function.</p>
<p>Tips: 1. Utilize the help(lcz_*) function to access comprehensive
documentation for each LCZ function. For instance, you can explore
details about the lcz_ts function by typing help(“lcz_ts”); 2. Each of
these functions includes imputation for missing values within the
data.frame. Refer to the documentation of each function and check the
“impute” argument for further details on how missing values are
handled.</p>
</div>
<div class="section level2">
<h2 id="data-inputs">Data inputs<a class="anchor" aria-label="anchor" href="#data-inputs"></a>
</h2>
<p>For the local functions to operate smoothly, you should import the
air temperature (or any other environmental variable) into R as a data
frame, with columns structured as follows:</p>
<ol style="list-style-type: decimal">
<li>
<em>date</em>: This column should contain date-time information.
This column must labeled “date”.</li>
<li>
<em>Station</em>: Designate a column for meteorological station
identifiers.</li>
<li>
<em>Air Temperature</em>: At least one column representing the air
temperature variable.</li>
<li>
<em>Latitude</em> and <em>Longitude</em>: Two columns are required
to specify the geographical coordinates.</li>
</ol>
<p>It’s important to note that the model standardizes the date-time
format to R’s conventions, such as “2023-03-13 11:00:00” or
“2023-03-13”. It also includes: e.g. “1/2/1999” or in format
i.e. “YYYY-mm-dd”, “1999-02-01”.</p>
<p>To streamline this process, LCZ4r offers a sample data frame,
accessible through the following way:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bymaxanjos.github.io/LCZ4r/">LCZ4r</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Load data from LCZ4r package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lcz_data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Check data structure out</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">lcz_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Classes 'data.table' and 'data.frame':   386354 obs. of  5 variables:</span></span>
<span><span class="co">#&gt;  $ date     : POSIXct, format: "2019-01-01 00:00:00" "2019-01-01 00:00:00" ...</span></span>
<span><span class="co">#&gt;  $ station  : chr  "airportthf" "airporttxl" "albrecht" "bamberger" ...</span></span>
<span><span class="co">#&gt;  $ airT     : num  8.5 7.9 8.05 8.27 8.2 ...</span></span>
<span><span class="co">#&gt;  $ Latitude : num  52.5 52.6 52.4 52.5 52.1 ...</span></span>
<span><span class="co">#&gt;  $ Longitude: num  13.4 13.3 13.3 13.3 13.5 ...</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="analyze-lcz-time-series">Analyze LCZ Time Series<a class="anchor" aria-label="anchor" href="#analyze-lcz-time-series"></a>
</h2>
<p>With the <code><a href="../reference/lcz_ts.html">lcz_ts()</a></code> function, you can analyze the air
temperature associated with LCZ classes over time. For instance, you can
perform hourly frequency analysis of air temperature for the years
2019-2020 using the “lcz_data” from the LCZ4r package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get the LCZ map for your city</span></span>
<span><span class="va">lcz_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lcz_get_map.html">lcz_get_map</a></span><span class="op">(</span>city<span class="op">=</span><span class="st">"Berlin"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Congratulations! You've successfully got Berlin LCZ map.</span></span>
<span></span>
<span><span class="co">#Let's get LCZ air temperature time series</span></span>
<span><span class="fu"><a href="../reference/lcz_ts.html">lcz_ts</a></span><span class="op">(</span><span class="va">lcz_map</span>, data_frame <span class="op">=</span> <span class="va">lcz_data</span>, </span>
<span>       var <span class="op">=</span> <span class="st">"airT"</span>, station_id <span class="op">=</span> <span class="st">"station"</span>,</span>
<span>       time.freq <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span> <span class="co"># Monthly temporal frequency. Let's change to "hour, "day", "week", and so on.</span></span>
<span><span class="co">#&gt; Congrats! You've successfully performed a month time series based on LCZ classes.</span></span></code></pre></div>
<p><img src="Introd_local_LCZ4r_files/figure-html/unnamed-chunk-3-1.png" width="3300"></p>
<p>Additionally, you can customize this function:</p>
<p><strong>1. Flexibility time selection</strong> You have the
flexibility to select specific years and months for analysis. For
example, you can specify a range of years (e.g., 1998:2004) or
individual years (e.g., c(1998, 2004)). Similarly, you can select months
either numerically (e.g., 1:6 for January to June) or by name (e.g.,
c(“January”, “December”)). To illustrate, you can select data for
September 1st, 2019, by including the arguments “year”, “month”, and
“day” in the function call. See the <a href="https://bookdown.org/david_carslaw/openair/sections/utilities/utility-functions.html#sec-selectByDate" class="external-link">utility
functions from the openair package</a> for more details.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#Selecting one specifique day</span></span>
<span><span class="fu"><a href="../reference/lcz_ts.html">lcz_ts</a></span><span class="op">(</span><span class="va">lcz_map</span>, data_frame <span class="op">=</span> <span class="va">lcz_data</span>, </span>
<span>       var <span class="op">=</span> <span class="st">"airT"</span>, station_id <span class="op">=</span> <span class="st">"station"</span>,</span>
<span>       time.freq <span class="op">=</span> <span class="st">"hour"</span>, </span>
<span>       year <span class="op">=</span> <span class="fl">2019</span>, month <span class="op">=</span> <span class="fl">9</span>, day <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Congrats! You've successfully performed a hour time series based on LCZ classes.</span></span></code></pre></div>
<p><img src="Introd_local_LCZ4r_files/figure-html/unnamed-chunk-4-1.png" width="3300"></p>
<p><strong>2. Splitting LCZ time series by temporal window or
site</strong> You have the flexibility to select specific years and
months for analysis. For example, you can specify a range of years
(e.g., 1998:2004) or individual years (e.g., c(1998, 2004)). Similarly,
you can select months either numerically (e.g., 1:6 for January to June)
or by name (e.g., c(“January”, “December”)). To illustrate, you can
select data for September 1st, 2019, by including the arguments “year”,
“month”, and “day” in the function call.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#Splitting by daylight </span></span>
<span><span class="fu"><a href="../reference/lcz_ts.html">lcz_ts</a></span><span class="op">(</span><span class="va">lcz_map</span>, data_frame <span class="op">=</span> <span class="va">lcz_data</span>, </span>
<span>       var <span class="op">=</span> <span class="st">"airT"</span>, station_id <span class="op">=</span> <span class="st">"station"</span>,</span>
<span>       time.freq <span class="op">=</span> <span class="st">"hour"</span>, <span class="co"># frequency changed to hour</span></span>
<span>       year <span class="op">=</span> <span class="fl">2019</span>, month <span class="op">=</span> <span class="fl">9</span>, day <span class="op">=</span> <span class="fl">1</span>, by <span class="op">=</span> <span class="st">"daylight"</span><span class="op">)</span> </span>
<span><span class="co">#&gt; Congrats! You've successfully performed a hour time series by daylight based on LCZ classes.</span></span></code></pre></div>
<p><img src="Introd_local_LCZ4r_files/figure-html/unnamed-chunk-5-1.png" width="3600"></p>
</div>
<div class="section level2">
<h2 id="calculate-lcz-thermal-anomalies">Calculate LCZ Thermal Anomalies<a class="anchor" aria-label="anchor" href="#calculate-lcz-thermal-anomalies"></a>
</h2>
<p>The thermal anomaly is a great way to evaluate the intra-urban air
temperatures differences. At each LCZ station, the thermal anomaly is
defined as the difference between its temperature and the overall mean
temperature of all LCZ stations. For instance, a positive temperature
anomaly indicates that a particular LCZ is warmer compared to all other
LCZs. The <code><a href="../reference/lcz_anomaly.html">lcz_anomaly()</a></code> function has the same utilities of
the <code><a href="../reference/lcz_ts.html">lcz_ts()</a></code> regarding <strong>Flexibility time
selection</strong> and <strong>Splitting LCZ time series by temporal
window or site</strong>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># If you want the thermal anomalies 1 sept 2020 on hourly basis.</span></span>
<span><span class="fu"><a href="../reference/lcz_anomaly.html">lcz_anomaly</a></span><span class="op">(</span><span class="va">lcz_map</span>, data_frame <span class="op">=</span> <span class="va">lcz_data</span>, </span>
<span>            var <span class="op">=</span> <span class="st">"airT"</span>, station_id <span class="op">=</span> <span class="st">"station"</span>, </span>
<span>            time.freq <span class="op">=</span> <span class="st">"hour"</span>, <span class="co">#Let's change the frequency to "day", "month", "year"</span></span>
<span>            year <span class="op">=</span> <span class="fl">2020</span>, month <span class="op">=</span> <span class="fl">9</span>, day <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; You've successfully generated anomalies based on LCZ classes.</span></span></code></pre></div>
<p><img src="Introd_local_LCZ4r_files/figure-html/unnamed-chunk-6-1.png" width="3300"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># If you want the thermal anomalies by months of 2020 on daily basis.</span></span>
<span><span class="fu"><a href="../reference/lcz_anomaly.html">lcz_anomaly</a></span><span class="op">(</span><span class="va">lcz_map</span>, data_frame <span class="op">=</span> <span class="va">lcz_data</span>, </span>
<span>            var <span class="op">=</span> <span class="st">"airT"</span>, station_id <span class="op">=</span> <span class="st">"station"</span>, </span>
<span>            time.freq <span class="op">=</span> <span class="st">"day"</span>, <span class="co">#Let's change the frequency to "day", "month", "year"</span></span>
<span>            year <span class="op">=</span> <span class="fl">2020</span>, by <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span></span>
<span><span class="co">#&gt; You've successfully generated anomalies by month based on LCZ classes.</span></span></code></pre></div>
<p><img src="Introd_local_LCZ4r_files/figure-html/unnamed-chunk-7-1.png" width="3300"></p>
</div>
<div class="section level2">
<h2 id="visualize-lcz-thermal-anomaly-map">Visualize LCZ Thermal Anomaly map<a class="anchor" aria-label="anchor" href="#visualize-lcz-thermal-anomaly-map"></a>
</h2>
<p>If you’re still with us and everything is running rightly, you can
proceed to generate a map of LCZ thermal anomalies using the
<code><a href="../reference/lcz_anomaly_map.html">lcz_anomaly_map()</a></code> function. This function employs
interpolation techniques such as Kriging and IDW to calculate and
interpolate anomalies. The settings for time frequency and data
splitting, as utilized in the <code>lcz_ts</code> and
<code><a href="../reference/lcz_anomaly.html">lcz_anomaly()</a></code> functions, remain relatively unchanged. But,
there are two new arguments to consider: <strong>sp.res</strong> (the
spatial resolution of the map in meters) and <strong>tp.res</strong>
(the frequency at which values are averaged). The
<code>lcz_anomaly_map</code> function returns either a single raster
file or a stack of raster files. Subsequently, you can visualize the
anomaly map using the <code><a href="../reference/lcz_plot_interp.html">lcz_plot_interp()</a></code> function.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#Mapping anomalies for 1st Sep 2020 at 09:00h using kriging</span></span>
<span><span class="va">my_anomaly_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lcz_anomaly_map.html">lcz_anomaly_map</a></span><span class="op">(</span><span class="va">lcz_map</span>,</span>
<span>                                data_frame <span class="op">=</span> <span class="va">lcz_data</span>, var <span class="op">=</span> <span class="st">"airT"</span>, station_id <span class="op">=</span> <span class="st">"station"</span>,</span>
<span>                                sp.res <span class="op">=</span> <span class="fl">100</span>, tp.res <span class="op">=</span> <span class="st">"hour"</span>,</span>
<span>                                year <span class="op">=</span> <span class="fl">2020</span>, month <span class="op">=</span> <span class="fl">9</span>, day <span class="op">=</span> <span class="fl">1</span>, hour <span class="op">=</span> <span class="fl">9</span>,</span>
<span>                                method <span class="op">=</span> <span class="st">"kriging"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [ordinary or weighted least squares prediction]</span></span>
<span><span class="co">#&gt; That's cool! Let's explore your LCZ anomaly map.</span></span>
<span></span>
<span><span class="co">#Plot anomaly map. Note that the argument ... is used to title etc..</span></span>
<span><span class="fu"><a href="../reference/lcz_plot_interp.html">lcz_plot_interp</a></span><span class="op">(</span><span class="va">my_anomaly_map</span>, </span>
<span>                title <span class="op">=</span> <span class="st">"LCZ-thermal anomalies"</span>, </span>
<span>                subtitle <span class="op">=</span> <span class="st">"Berlin - 01.09.2020 at 09:00"</span>,</span>
<span>                caption <span class="op">=</span> <span class="st">"Source: LCZ4r, 2024."</span>,</span>
<span>                fill <span class="op">=</span> <span class="st">"[ºC]"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Introd_local_LCZ4r_files/figure-html/unnamed-chunk-8-1.png" width="3300"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Active the by argument! Mapping daytime and nighttime anomalies for 1st Sep 2020</span></span>
<span><span class="va">my_anomlay_daylight</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lcz_anomaly_map.html">lcz_anomaly_map</a></span><span class="op">(</span><span class="va">lcz_map</span>,</span>
<span>                              data_frame <span class="op">=</span> <span class="va">lcz_data</span>, var <span class="op">=</span> <span class="st">"airT"</span>, station_id <span class="op">=</span> <span class="st">"station"</span>,</span>
<span>                              sp.res <span class="op">=</span> <span class="fl">100</span>, tp.res <span class="op">=</span> <span class="st">"hour"</span>,</span>
<span>                              year <span class="op">=</span> <span class="fl">2020</span>, month <span class="op">=</span> <span class="fl">9</span>, day <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                              by<span class="op">=</span><span class="st">"daylight"</span>,</span>
<span>                              method <span class="op">=</span> <span class="st">"kriging"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [ordinary or weighted least squares prediction]</span></span>
<span><span class="co">#&gt; [ordinary or weighted least squares prediction]</span></span>
<span><span class="co">#&gt; That's cool! Let's explore your LCZ anomaly map.</span></span>
<span></span>
<span><span class="va">my_anomlay_daylight</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 617, 749, 2  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 100, 100  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 1457000, 1531900, 6861482, 6923182  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : WGS 84 / Pseudo-Mercator (EPSG:3857) </span></span>
<span><span class="co">#&gt; source(s)   : memory</span></span>
<span><span class="co">#&gt; names       : krige_20200901050000_daylight, krige_20200901_nighttime </span></span>
<span><span class="co">#&gt; min values  :                    -0.9652088,                -2.344815 </span></span>
<span><span class="co">#&gt; max values  :                     0.7134152,                 1.733124</span></span>
<span></span>
<span><span class="co">#Plot anomaly map. Note that I renamed the raster layers</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">my_anomlay_daylight</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"daytime"</span>, <span class="st">"nighttime"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/lcz_plot_interp.html">lcz_plot_interp</a></span><span class="op">(</span><span class="va">my_anomlay_daylight</span>, </span>
<span>                title <span class="op">=</span> <span class="st">"LCZ-thermal anomalies"</span>, </span>
<span>                subtitle <span class="op">=</span> <span class="st">"Berlin - daytime and nighttime (01.09.2020)"</span>,</span>
<span>                caption <span class="op">=</span> <span class="st">"Source: LCZ4r, 2024."</span>,</span>
<span>                fill <span class="op">=</span> <span class="st">"[ºC]"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Introd_local_LCZ4r_files/figure-html/unnamed-chunk-9-1.png" width="3300"></p>
</div>
<div class="section level2">
<h2 id="perform-lcz-interpolation">Perform LCZ Interpolation<a class="anchor" aria-label="anchor" href="#perform-lcz-interpolation"></a>
</h2>
<p>Let’s interpolate air temperature using the
<code><a href="../reference/lcz_interp_map.html">lcz_interp_map()</a></code>, that follows the logic of the
<code><a href="../reference/lcz_anomaly_map.html">lcz_anomaly_map()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">my_interp_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lcz_interp_map.html">lcz_interp_map</a></span><span class="op">(</span><span class="va">lcz_map</span>,</span>
<span>                           data_frame <span class="op">=</span> <span class="va">lcz_data</span>, var <span class="op">=</span> <span class="st">"airT"</span>, station_id <span class="op">=</span> <span class="st">"station"</span>,</span>
<span>                           sp.res <span class="op">=</span> <span class="fl">100</span>, tp.res <span class="op">=</span> <span class="st">"hour"</span>,</span>
<span>                           year <span class="op">=</span> <span class="fl">2019</span>, month <span class="op">=</span> <span class="fl">2</span>, day<span class="op">=</span><span class="fl">6</span>, hour<span class="op">=</span><span class="fl">5</span>,</span>
<span>                           method <span class="op">=</span> <span class="st">"kriging"</span>,</span>
<span>                           isave <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [ordinary or weighted least squares prediction]</span></span>
<span><span class="co">#&gt; That's cool! Let's explore your LCZ interp map.</span></span>
<span></span>
<span><span class="fu"><a href="../reference/lcz_plot_interp.html">lcz_plot_interp</a></span><span class="op">(</span><span class="va">my_interp_map</span><span class="op">)</span></span></code></pre></div>
<p><img src="Introd_local_LCZ4r_files/figure-html/unnamed-chunk-10-1.png" width="3300"></p>
</div>
<div class="section level2">
<h2 id="assess-lcz-for-urban-heat-island-intensity">Assess LCZ for Urban Heat Island Intensity<a class="anchor" aria-label="anchor" href="#assess-lcz-for-urban-heat-island-intensity"></a>
</h2>
<p>It is coming soon..</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Max Anjos.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
