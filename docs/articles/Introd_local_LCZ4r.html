<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="LCZ4r">
<title>Introduction to Local Functions ‚Ä¢ LCZ4r</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Montserrat-0.4.9/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to Local Functions">
<meta property="og:description" content="LCZ4r">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">LCZ4r</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html" aria-label="Home">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/tutorials.html">Tutorials</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/examples.html">LCZ4r-QGIS Plugin</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ByMaxAnjos/LCZ4r/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction to Local Functions</h1>
                        <h4 data-toc-skip class="author">Max Anjos</h4>
            
            <h4 data-toc-skip class="date">March 15, 2025</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ByMaxAnjos/LCZ4r/blob/HEAD/vignettes/Introd_local_LCZ4r.Rmd" class="external-link"><code>vignettes/Introd_local_LCZ4r.Rmd</code></a></small>
      <div class="d-none name"><code>Introd_local_LCZ4r.Rmd</code></div>
    </div>

    
    
<p>The <strong>Local functions of LCZ4r</strong> are specialized tools
designed to analyze large datasets, such as hourly air temperature
readings. This tutorial focuses on using data from Berlin, collected
across 23 meteorological stations as part of the <a href="https://www.tu.berlin/en/klima/institutions-and-services/urban-climate-observatory" class="external-link">Urban
Climate Observatory (UCO)</a></p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <strong>Local functions in <code>LCZ4r</code></strong>, offer
powerful tools to handle and analyze urban climate data. They enable
time-series analysis, mapping of thermal anomalies, spatial
interpolation, and more. Below is a summary of these functions:</p>
<table class="table">
<colgroup>
<col width="23%">
<col width="30%">
<col width="23%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Description</th>
<th>Data Required</th>
<th>Internet Access Required</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="../reference/lcz_ts.html">lcz_ts()</a></code></td>
<td>Analyze LCZ Time Series</td>
<td>Yes</td>
<td>Not needed</td>
</tr>
<tr class="even">
<td><code><a href="../reference/lcz_anomaly.html">lcz_anomaly()</a></code></td>
<td>Calculate LCZ Thermal Anomalies</td>
<td>Yes</td>
<td>Not needed</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/lcz_anomaly_map.html">lcz_anomaly_map()</a></code></td>
<td>Map LCZ Thermal Anomalies</td>
<td>Yes</td>
<td>Not needed</td>
</tr>
<tr class="even">
<td><code><a href="../reference/lcz_interp_map.html">lcz_interp_map()</a></code></td>
<td>Perform LCZ Interpolation</td>
<td>Yes</td>
<td>Not needed</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/lcz_plot_interp.html">lcz_plot_interp()</a></code></td>
<td>Visualize LCZ Interpolation</td>
<td>Yes</td>
<td>Not needed</td>
</tr>
<tr class="even">
<td><code><a href="../reference/lcz_interp_eval.html">lcz_interp_eval()</a></code></td>
<td>Evaluate LCZ Interpolation</td>
<td>Yes</td>
<td>Not needed</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/lcz_uhi_intensity.html">lcz_uhi_intensity()</a></code></td>
<td>Assess LCZ for Urban Heat Island Intensity</td>
<td>Yes</td>
<td>Not needed</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="tips">üí° Tips:<a class="anchor" aria-label="anchor" href="#tips"></a>
</h2>
<ol style="list-style-type: decimal">
<li>Utilize the help(lcz_*) function to access detailed documentation
for each LCZ4r function. For example, to learn about the lcz_ts
function, type help(‚Äúlcz_ts‚Äù) in the console.</li>
<li>Each LCZ4r function supports imputation for handling missing values
within data frames. For more information on imputation methods, refer to
the ‚Äúimpute‚Äù argument in the documentation of each function.</li>
</ol>
</div>
<div class="section level2">
<h2 id="data-input-requirements">Data input requirements<a class="anchor" aria-label="anchor" href="#data-input-requirements"></a>
</h2>
<p>To ensure smooth operation of the local functions, input data should
be structured as a data frame with the following columns:</p>
<ol style="list-style-type: decimal">
<li>
<em>date</em>: This column should contain date-time information.
This column must labeled as <strong>‚Äúdate‚Äù, ‚Äútime‚Äù, ‚Äútimestamp‚Äù or
‚Äúdatetime‚Äù</strong>. Ensure that the date-time format aligns with R‚Äôs
conventions (e.g., YYYY-MM-DD HH:MM:SS). Acceptable formats include
‚Äú1999-02-01‚Äù. For more details, see format dates and times in the <a href="https://openair-project.github.io/book/sections/intro/openair-package.html#reading-and-formatting-dates-and-times" class="external-link">openair
pak R</a>.</li>
<li>
<em>Station Identifier</em>: A column for identifying meteorological
stations.</li>
<li>
<em>Air Temperature or other variable</em>: At least one column
representing the air temperature or any other target variable.</li>
<li>
<em>Latitude</em> and <em>Longitude</em>: Two columns for the
geographical coordinates of each station. Ensure the column is named
<strong>‚Äúlat‚Äù or ‚Äúlatitude and‚Äùlon‚Äù, ‚Äúlong‚Äù or
‚Äúlongitude‚Äù</strong>.</li>
</ol>
<p>To simplify this setup, LCZ4r provides a sample data frame, which you
can load with the following command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bymaxanjos.github.io/LCZ4r/">LCZ4r</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Load data from LCZ4r package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lcz_data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Check data structure out</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">lcz_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="fig_local_1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="import-your-data">Import your data<a class="anchor" aria-label="anchor" href="#import-your-data"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"data.table"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Replace the path with the actual path to your CSV file</span></span>
<span><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="st">"PC/path/file_name.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">my_data</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="customizing-local-functions-in-lcz4r">Customizing Local Functions in LCZ4r<a class="anchor" aria-label="anchor" href="#customizing-local-functions-in-lcz4r"></a>
</h2>
<p>You can further customize the Local Functions to suit specific
analysis needs:</p>
<div class="section level3">
<h3 id="flexibility-time-selection">
<strong>1. Flexibility time selection</strong><a class="anchor" aria-label="anchor" href="#flexibility-time-selection"></a>
</h3>
<p>The Local Functions have an argument <em>‚Ä¶</em> that provides options
to filter data by specific years, months, days, and hours to narrow down
your analysis period. Examples of how to use these arguments
include:</p>
<ul>
<li><p><strong>Year(s)</strong>: Numeric value(s) specifying the year(s)
to select. For example, year = 1998:2004 selects all years between 1998
and 2004 (inclusive), while year = c(1998, 2004) selects only the years
1998 and 2004.</p></li>
<li><p><strong>Month(s)</strong>: Numeric or character value(s)
specifying the months to select. Numeric examples: month = 1:6 (January
to June), or character examples: month = c(‚ÄúJanuary‚Äù,
‚ÄúDecember‚Äù).</p></li>
<li><p><strong>Day(s)</strong>: Numeric value(s) specifying the days to
select. For instance, day = 1:30 selects days from 1 to 30, or day = 15
selects only the 15th day of the month.</p></li>
<li><p><strong>Hour(s)</strong>: Numeric value(s) specifying the hours
to select. For example, hour = 0:23 selects all hours in a day, while
hour = 9 selects only the 9th hour.</p></li>
<li><p><strong>Start date</strong>: A string specifying the start date
in either start=‚ÄúDD/MM/YYYY‚Äù (e.g., ‚Äú1/2/1999‚Äù) or ‚ÄúYYYY-mm-dd‚Äù format
(e.g., ‚Äú1999-02-01‚Äù).</p></li>
<li><p><strong>End date</strong>: A string specifying the end date in
either end=‚ÄúDD/MM/YYYY‚Äù (e.g., ‚Äú1/2/1999‚Äù) or ‚ÄúYYYY-mm-dd‚Äù format (e.g.,
‚Äú1999-02-01‚Äù).</p></li>
</ul>
<p><strong>Examples</strong></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Select a range of years (e.g., 1998:2004) or specific years (e.g., c(1998, 2004)).</span></span>
<span><span class="fu"><a href="../reference/lcz_ts.html">lcz_ts</a></span><span class="op">(</span></span>
<span>  <span class="va">lcz_map</span>,</span>
<span>  year<span class="op">=</span><span class="fl">1998</span><span class="op">:</span><span class="fl">2004</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Filter by month, either by numeric values (e.g., 1:6 for January to June) or by names (e.g., c("January", "December")).</span></span>
<span><span class="fu">lcz_anomlay</span><span class="op">(</span></span>
<span>  <span class="va">lcz_map</span>,</span>
<span>  year<span class="op">=</span><span class="fl">2012</span>, month<span class="op">=</span><span class="fl">9</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Pinpoint a specific date, such as September 1, 2019, by setting the *year*, *month*, *day*, as arguments.</span></span>
<span><span class="fu"><a href="../reference/lcz_interp_map.html">lcz_interp_map</a></span><span class="op">(</span></span>
<span>  <span class="va">lcz_map</span>,</span>
<span>  year<span class="op">=</span><span class="fl">2012</span>, month<span class="op">=</span><span class="fl">9</span>, day<span class="op">=</span><span class="fl">1</span> </span>
<span><span class="op">)</span></span>
<span><span class="co"># For a specific hour.</span></span>
<span><span class="fu">lcz_interp_map_anomaly</span><span class="op">(</span></span>
<span>  <span class="va">lcz_map</span>,</span>
<span>  year<span class="op">=</span><span class="fl">2012</span>, month<span class="op">=</span><span class="fl">9</span>, day<span class="op">=</span><span class="fl">1</span>, hour<span class="op">=</span><span class="fl">5</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Pinpoint a specific period, by setting *start*=1/9/1986 and *end*=1/9/2024, as arguments.</span></span>
<span><span class="fu"><a href="../reference/lcz_uhi_intensity.html">lcz_uhi_intensity</a></span><span class="op">(</span></span>
<span>  <span class="va">lcz_map</span>,</span>
<span>  var <span class="op">=</span> <span class="st">"airT"</span>, </span>
<span>  station_id <span class="op">=</span> <span class="st">"station"</span>,</span>
<span>  start<span class="op">=</span><span class="st">"1/9/2019"</span>, end<span class="op">=</span><span class="st">"30/10/2019"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>For more information, see the <a href="https://bookdown.org/david_carslaw/openair/sections/utilities/utility-functions.html#sec-selectByDate" class="external-link">utility
functions from the openair package</a>.</p>
<p><strong>2. Splitting LCZ time series by temporal window or
site</strong></p>
<p>You can segment the LCZ time series data using the <em>by</em>
argument, allowing for analysis across different temporal windows or
sites. Available split options include:</p>
<ul>
<li><ol style="list-style-type: decimal">
<li>Temporal segments: ‚Äúyear‚Äù, ‚Äúseason‚Äù, ‚Äúseasonyear‚Äù, ‚Äúmonth‚Äù,
‚Äúmonthyear‚Äù, ‚Äúweekday‚Äù, ‚Äúweekend‚Äù.</li>
</ol></li>
<li><ol start="2" style="list-style-type: decimal">
<li>Daylight split: ‚Äúdaylight‚Äù, which divides data into daytime and
nighttime periods. Note that the
<strong><code>Daylight option may result in both daytime and nighttime hours being represented in UTC</code></strong>.
See <a href="https://gml.noaa.gov/grad/solcalc/" class="external-link">NOAA</a> and argument
type and in <a href="https://openair-project.github.io/book/sections/intro/openair-package.html#the-type-option" class="external-link">openair
package</a>
</li>
</ol></li>
<li><ol start="3" style="list-style-type: decimal">
<li>You can use also c(‚Äúdaylight‚Äù, ‚Äúmonth‚Äù), c(‚Äúdaylight‚Äù,
‚Äú‚Äúseason‚Äù)</li>
</ol></li>
</ul>
<p>For further details, refer to the <a href="https://bookdown.org/david_carslaw/openair/sections/intro/openair-package.html#the-type-option" class="external-link">type
in openair package:</a></p>
</div>
</div>
<div class="section level2">
<h2 id="have-feedback-or-suggestions">Have feedback or suggestions?<a class="anchor" aria-label="anchor" href="#have-feedback-or-suggestions"></a>
</h2>
<p>Do you have an idea for improvement or did you spot a mistake? We‚Äôd
love to hear from you! Click the button below to create a new issue
(Github) and share your feedback or suggestions directly with us.</p>
<button type="button" class="btn" style="background-color: #008000; color: white; padding: .25rem .5rem; font-size: .75rem; border: none; border-radius: .25rem;">
<a href="https://github.com/ByMaxAnjos/LCZ4r/issues/new" style="text-decoration: none; color: white;" class="external-link">
Open an issue in the Github repository </a>
</button>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Max Anjos.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
